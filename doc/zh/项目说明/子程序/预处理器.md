# 预处理器  

预处理器是`oloc`在执行运算时的第一个子程序,负责将输入的表达式进行格式的统一化.  

## 输入输出  

预处理器接受一个参数.  

- `expression`:`str` 输入的表达式  

预处理器的返回值为`str`,即处理后的表达式  

## 工作流  

预处理器按顺序依次执行如下内容.  

1. ***注释去除***  
   - **功能**  
      - 移除输入的表达式中的注释  
   - **实现**  
      - 检测`@`后的内容,移除结尾注释  
      - 检测`#`包裹的内容,移除自由注释  
   - **示例**  
      - *输入*: `1 + #note# 1 @注释`  
      - *输出*: `1 + 1`
   - **异常**  
    - `OlocFreeCommentException`: 当`#`不匹配时  
2. ***符号映射***  
   - **功能**  
      - 根据[符号映射表](../数据/符号映射表.md)进行符号替换  
   - **实现**  
      - 使用`simpsave`从`olocdata.ini`中读取对应数据至内存中  
      - 根据读取的字典,依次进行符号替换
      > 由于字典有序性限制,`oloc`需要`python >= 3.7` 
   - **示例**  
      - *输入*: `2/3加5×4`  
      - *输出*: `2/3+5*4`  
3. ***特殊格式处理***  
   - **功能**  
      - 移除表达式中的数字分隔符    
   - **实现**  
      - 移除所有的`,`
   - **示例**    

## 异常  

---
***[点此](../项目说明梗概.md)跳转回说明梗概页面***  
