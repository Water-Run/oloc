# 语法分析器  

语法分析器是`oloc`在执行运算时的第三个子程序,负责将Token流构造为AST抽象语法树.  
语法分析器位于`oloc_parser.py`.  
语法分析器实例于`Parser`类.  

## 关于运算体单元  

运算体单元实现于类`Unit`中.  
包括以下**属性**:  

1. `type`: `TYPE` 单元的类型(见下)  
2. `token`: `Token` 单元的Token流

节点以以下进行**类型分类**:  

1. **表达式**  
    1. *二元表达式*: `BIN_EXP`  
    2. *一元表达式*: `URY_EXP`  
    3. *分组表达式*: `GRP_EXP`  
2. **字面量**: `LITERAL`  
3. **函数**: `FUN_CAL`

## 输入输出  

词法分析器接受一个参数.  

- `tokens`:`list[Token]` 输入的Token流  

词法分析器的返回值为`list[Unit]`,即处理后的单元列表.  

## 工作流  

语法分析器按顺序依次执行如下内容.  

1. ***Unit流生成***  
   - **功能**  
      - 根据Token流,生成Unit流      
   - **实现**  
      - 扫描Token流,根据分类迭代生成     
   - **示例**  
      - *输入*: `["1", "+", "2", "+", "3", "+", "4"]`  
      - *输出*: `[[["1", "+", "2"], "+", ["3", "+", "4"]]]` (以嵌套列表形式表示)
   - **异常**  
      - `OlocInvalidTokenException`: 当生成的`Token`自检不通过,或为`UNKNOWN`类型时
2. ***合法性检查***  
   - **功能**  
      - 检查生成Unit流各部分是否合法      
   - **实现**  
      - 扫描Unit流,检查各个情况下的合法性     
   - **示例**  
      - *输入*: ``  
      - *输出*: (无)
   - **异常**  
      - `OlocSyntaxErrorException`: 当出现不合法的情况时  
     
---
***[点此](../项目说明梗概.md)跳转回说明梗概页面***  