# 运算符  

表示计算逻辑的符号称为运算符.  
**符号可以有很多种表示方式**,在计算的预处理过程中,将会被统一转化为相同的形式.见[符号映射表](../项目说明/数据/符号映射表.md).
> 转换后的运算符均只包含一个字符  

## 算术运算符  

算术运算符表达对于计算单元的操作.  

### 一元运算符  

一元运算符值针对一个计算单元的算术运算符.包括:  

| 名称    | 符号                            | 说明                                          | 示例      |  
|-------|-------------------------------|---------------------------------------------|---------|  
| 正号    | `+`                           | 放在一个计算单元的前面,表示一个正计算单元                       | `+3`    |  
| 负号    | `-`                           | 放在一个计算单元的前面,表示一个负计算单元                       | `-2`    |  
| 根号    | `√` 或 `┌`                     | 放在一个计算单元的前面和后面,表示对一个计算单元取绝对值.本质上是绝对值函数`abs` | `√2`    |  
| 取绝对值号 | `\| `                         | 放在一个数的前面和后面,表示对一个计算单元开二次根.本质上是开根号函数`sqrt`   | `\|x\|` |  
| 阶乘号   | `!`                           | 放在一个计算单元的后面,表示对一个计算单元计算阶乘.本质上函数`fact`       | `100!`  |  
| 角度号   | `°` 或 `deg` 或 `degree` 或 `^o` | 放在一个计算单元的后面,表示对一个计算单元是角度制.本质上角度转弧度函数`rad`   | `45°`   |  

### 二元运算符  

一元运算符值针对两个计算单元的算术运算符.包括:  

| 名称  | 符号                            | 说明                              | 示例    |  
|-----|-------------------------------|---------------------------------|-------|  
| 加号  | `+`                           | 表示计算单元和计算单元之间执行加法               | `1+1` |  
| 减号  | `-`                           | 表示计算单元和计算单元之间执行减法               | `3-4` |  
| 乘号  | `*` 或 `·`                     | 表示计算单元和计算单元之间执行乘法               | `5*6` |  
| 除号  | `/` 或 `÷`                     | 表示计算单元和计算单元之间执行除法               | `3/4` |  
| 指数号 | `^` 或 `**`                    | 表示前一个计算单元的后一个计算单元次方.本质上函数`pow`  | `2^3` |  
| 取余号 | `°` 或 `deg` 或 `degree` 或 `^o` | 表示前一个计算单元和后一个计算单元的余数.本质上函数`mod` | `5%1` |  

*注:*  

1. 分数线`/`和除号含义等价.  
2. 一些情况下乘法符号可以省略:  
   - 当数值和括号相连时.如`3*(2+3)`可省略为`3(2+3)`  
   - 当数值和无理数相连时.如`2*π/3`可省略为`2π/3`  
   - 以上的混合形式.如`3((-2/3x)y)`  
3. 指数次数为整数时,可以写做角标形式,如`3²`

## 分组运算符  

括号用于表达**运算中优先运算的部分**.`(`和`)`是主要的符号.括号内的内容将被视为一个整体,并按括号优先级计算.
一些括号的使用示例:  
```python
oloc.calculate("3/(-1+2)") # Output: 3
oloc.calculate("2*(3+4)") # Output: 14
oloc.calculate("5/(1+1)*(2-1)") # Output: 5/2
```
表达式中可以只使用小括号符号`(`和`)`.`oloc`也支持显示的区分括号层级.它们从小到大依次是中括号`[`和`]`和大括号`{`和`}`.  
当**显式区分括号层级时,级别更小的括号层级必须比级别更大的括号要深**.例如,表达式`3+(3/4+[5/6])`将会抛出异常.同时,编写级别更大的括号必须保证已有级别更小的括号存在.例如,`2+{3*[4+1]}`也会抛出异常.    
**`oloc`不限制相同级别的括号在不同层级重复出现**.例如,`[[2/3π+1]*x]-[sin(π)*(2^1/2-1)]`是一个合法的表达式.  

> 在使用括号时,记得确保正确的开闭

## 运算符的优先级  

在`oloc`中,运算符的优先级按以下设定:  

1. 分组运算符拥有最高的优先级.嵌套最深的分组运算符拥有最高的优先级  
2. 一元运算符优先于二元运算符  
3. 二元运算符中,可转换为函数的运算符优先于乘除,乘除优先于加减  
4. 在满足以上条件的基础上,左侧优先于右侧(计算从左到右进行)  

*注*:  

当`+`和`-`作为一元运算符(即表示正负号)时,实质上是隐式的在计算单元之前添加一个`0`,本质上还是二元运算符,采用二元运算符优先级.  

## 无实际意义的其它符号  

以下符号在`oloc`中并没有实际意义.你可以在你的表达式中写下它,不影响计算的进行.  
它们包括:  
- 空格
- `rad`或`radians`.在不指明的情况下,`oloc`默认采用幅度制,因此该运算符会被舍去  
- `_`.该符号作为自定义区分符(如对无理数进行区分等)使用,不进行限制.因此,需要注意的是如`x_y`和`xy`是等价的    
- `=`.你可以为表达式显式的添加等于号.不过,你只能添加在结尾,否则会抛出异常  

---  
***下一章节:[函数](函数.md)***  
*[返回目录](使用教程目录.md)*  